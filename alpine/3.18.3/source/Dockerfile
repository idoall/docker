FROM alpine:3.18.3

# -----------------------------------------------------------------------------
# 将系统时间改为上海时间
# -----------------------------------------------------------------------------
RUN apk add tzdata \
    && ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \
    && echo "Asia/Shanghai" > /etc/timezone \
    \
    # -----------------------------------------------------------------------------
    # 添加 ca 证书认证
    # -----------------------------------------------------------------------------
    && apk add ca-certificates \
    && update-ca-certificates \
    \
    # -----------------------------------------------------------------------------
    # 修改root用户的shell为bash，默认使用的是ash。
    # -----------------------------------------------------------------------------
    && apk add shadow \
    && usermod -s /bin/bash root \
    \
    # -----------------------------------------------------------------------------
    # 安装常用工具
    # -----------------------------------------------------------------------------
    && apk add vim bash bash-completion openssh \
    \
    # -----------------------------------------------------------------------------
    # 设置常用别名
    # -----------------------------------------------------------------------------
    && echo "export LS_OPTIONS='--color=auto'" >> /root/.bashrc \
    && echo "alias ls='ls \$LS_OPTIONS'" >>  /root/.bashrc \
    && echo "alias ll='ls \$LS_OPTIONS -l'" >>  /root/.bashrc \
    && echo "alias l='ls \$LS_OPTIONS -lA'" >>  /root/.bashrc \
    && source /root/.bashrc \
    # -----------------------------------------------------------------------------
    # 清除缓存
    # -----------------------------------------------------------------------------
    && rm -rf /var/lib/apt/lists/* /var/cache/apk/*